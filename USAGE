Pipeline for RecobundlesX
=========================

USAGE

nextflow run main.nf --input ... [OPTIONAL_ARGUMENTS]
nextflow run main_group.nf --input ... [OPTIONAL_ARGUMENTS]
To call with a container add:
    -with-singularity scilus/scilus:1.2.0_rbxflow-1.1.0
    -with-docker scilus/scilus:1.2.0_rbxflow-1.1.0

The recommanded atlas is available at https://zenodo.org/record/4630660#.YJvmwXVKhdU
The main_group.nf is an attempt at a hierarchical approach, use with a configuration file with groups.

DESCRIPTION

    --input=/path/to/[root]              Root folder containing multiple subjects

                                        [root]
                                        ├── S1
                                        │   ├── *fa.nii.gz
                                        │   └── *tracking.trk
                                        └── S2
                                            └── *

    --atlas_directory                   Path of the folder containing all atlases

    OPTIONAL ARGUMENTS (current value)
    --run_average_bundles               Run average bundles ($run_average_bundles)


    --minimal_vote_ratio                Percentage of the vote to obtain in order to be considered valid ($minimal_vote_ratio)
    --seed                              List of random seeds values for the rng ($seed)
    --outlier_alpha                     Remove spurious streamlines based on shape ($outlier_alpha)

    --register_processes                Number of processes for registration task ($register_processes).
    --rbx_processes                     Number of processes for bundle recognition task ($rbx_processes).
    --single_dataset_size_GB            Limit the number of parallel RBx to avoid RAM problem ($single_dataset_size_GB)
                                        Average tracking files size per subject (round up for safety)

    --processes                         The number of parallel processes to launch ($cpu_count).
                                        Only affects the local scheduler.


AVAILABLE PROFILES (using -profile option (e.g. -profile large_dataset,cbrain))
fully_reproducible                       When this profile is used, all the parameters will be set to have 100% reproducible results.

macos                                    When this profile is used, rbx_flow will modify a parameter (scratch) for MacOS users.

cbrain                                   When this profile is used, Nextflow will copy all the output files in publishDir and not use symlinks.

NOTES

Use '-C config_file.config' to specify a non-default configuration file.
The '-C config_file.config' must be inserted after the nextflow call
like 'nextflow -C config_file.config run ...'.
